<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="RactiveJS contributors"> 
    <link rel="canonical" href="https://ractive.js.org/get-started/tutorials/expressions-and-computations/"> 
    <link rel="shortcut icon" href="../../../img/favicon.ico">

    <title>Expressions and Computations - Ractive.js</title>

    <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../../css/base.css" rel="stylesheet">
    <link href="../../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">


    <link href="../../../css/index.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../..">Ractive.js</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../..">Introduction</a>
</li>

                        
                            
<li >
    <a href="../../60-second-setup/">60-second Setup</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Learn</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../hello-world/">Hello, world!</a>
</li>

        
            
<li >
    <a href="../references-and-context/">References and Context</a>
</li>

        
            
<li class="active">
    <a href="./">Expressions and Computations</a>
</li>

        
            
<li >
    <a href="../all-things-template/">All Things Template</a>
</li>

        
            
<li >
    <a href="../context-and-helpers/">Context and Helpers</a>
</li>

        
            
<li >
    <a href="../dom-and-instance-events/">DOM and Instance Events</a>
</li>

        
            
<li >
    <a href="../transitions/">Transitions</a>
</li>

        
            
<li >
    <a href="../components/">Coomponents</a>
</li>

        
            
<li >
    <a href="../decorators/">Decorators</a>
</li>

        
            
<li >
    <a href="../svg-and-animation/">SVG and Animation</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Examples</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../examples/analog-clock/">Analog Clock</a>
</li>

        
            
<li >
    <a href="../../examples/animated-chart/">Animated Chart</a>
</li>

        
            
<li >
    <a href="../../examples/comments/">Comments</a>
</li>

        
            
<li >
    <a href="../../examples/donut-chart/">Donut Chart</a>
</li>

        
            
<li >
    <a href="../../examples/illustration/">Illustration</a>
</li>

        
            
<li >
    <a href="../../examples/rating-stars/">Rating Sars</a>
</li>

        
            
<li >
    <a href="../../examples/todo-list/">ToDo List</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../debugging/">Debugging</a>
</li>

                        
                            
<li >
    <a href="../../support/">Support</a>
</li>

                        
                            
<li >
    <a href="../../contributing/">Contributing</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../api/initialization-options/">Initialization Options</a>
</li>

                        
                            
<li >
    <a href="../../../api/static-properties/">Static Properties</a>
</li>

                        
                            
<li >
    <a href="../../../api/static-methods/">Static Methods</a>
</li>

                        
                            
<li >
    <a href="../../../api/instance-properties/">Instance Properties</a>
</li>

                        
                            
<li >
    <a href="../../../api/instance-methods/">Instance Methods</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Helper Objects</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../api/helper-objects/node-info/">Node Info</a>
</li>

        
            
<li >
    <a href="../../../api/helper-objects/parse/">Parse</a>
</li>

        
            
<li >
    <a href="../../../api/helper-objects/transition/">Transition</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../../api/attributes/">Attributes</a>
</li>

                        
                            
<li >
    <a href="../../../api/keypath-prefixes/">Keypath Prefixes</a>
</li>

                        
                            
<li >
    <a href="../../../api/special-references/">Special References</a>
</li>

                        
                            
<li >
    <a href="../../../api/component-files/">Component Files</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Extend <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../extend/adaptors/">Adaptors</a>
</li>

                        
                            
<li >
    <a href="../../../extend/components/">Components</a>
</li>

                        
                            
<li >
    <a href="../../../extend/decorators/">Decorators</a>
</li>

                        
                            
<li >
    <a href="../../../extend/easings/">Easings</a>
</li>

                        
                            
<li >
    <a href="../../../extend/events/">Events</a>
</li>

                        
                            
<li >
    <a href="../../../extend/interpolators/">Interpolators</a>
</li>

                        
                            
<li >
    <a href="../../../extend/partials/">Partials</a>
</li>

                        
                            
<li >
    <a href="../../../extend/transitions/">Transitions</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Integrations <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../integrations/loaders/">Loaders</a>
</li>

                        
                            
<li >
    <a href="../../../integrations/plugins/">Plugins</a>
</li>

                        
                            
<li >
    <a href="../../../integrations/tools/">Tools</a>
</li>

                        
                            
<li >
    <a href="../../../integrations/libraries/">Libraries</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Concepts <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Architecture</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../concepts/architecture/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../../concepts/architecture/parser/">Parser</a>
</li>

        
            
<li >
    <a href="../../../concepts/architecture/model/">Model</a>
</li>

        
            
<li >
    <a href="../../../concepts/architecture/view/">View</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Data Binding</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../concepts/data-binding/computed-properties/">Computed Properties</a>
</li>

        
            
<li >
    <a href="../../../concepts/data-binding/dependents/">Dependents</a>
</li>

        
            
<li >
    <a href="../../../concepts/data-binding/observers/">Observers</a>
</li>

        
            
<li >
    <a href="../../../concepts/data-binding/parallel-dom/">Parallel DOM</a>
</li>

        
            
<li >
    <a href="../../../concepts/data-binding/two-way-binding/">Two-Way Binding</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Events</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../concepts/events/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../../concepts/events/bubbling/">Bubbling</a>
</li>

        
            
<li >
    <a href="../../../concepts/events/directives/">Directives</a>
</li>

        
            
<li >
    <a href="../../../concepts/events/method-calls/">Method Calls</a>
</li>

        
            
<li >
    <a href="../../../concepts/events/proxy-events/">Proxy Events</a>
</li>

        
            
<li >
    <a href="../../../concepts/events/publish-subscribe/">Publish-Subscribe</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Rendering</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../concepts/rendering/progressive-enhancement/">Progressive Enhancement</a>
</li>

        
            
<li >
    <a href="../../../concepts/rendering/server-side-rendering/">Server-Side Rendering</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Security</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../concepts/security/csp/">CSP</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Templates</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../concepts/templates/elements/">Elements</a>
</li>

        
            
<li >
    <a href="../../../concepts/templates/expressions/">Expressions</a>
</li>

        
            
<li >
    <a href="../../../concepts/templates/keypaths/">Keypaths</a>
</li>

        
            
<li >
    <a href="../../../concepts/templates/mustaches/">Mustaches</a>
</li>

        
            
<li >
    <a href="../../../concepts/templates/parsing/">Parsing</a>
</li>

        
            
<li >
    <a href="../../../concepts/templates/references/">References</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Articles <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../articles/introducing-ractive-js/">Introducing Ractive.js</a>
</li>

                        
                            
<li >
    <a href="../../../articles/the-origins-of-ractive/">The Origins Of Ractive</a>
</li>

                        
                            
<li >
    <a href="../../../articles/ractive-js-expressions-and-the-new-wave-of-reactive-programming/">Ractive.js Expressions And The New Wave Of Reactive Programming</a>
</li>

                        
                            
<li >
    <a href="../../../articles/ractive-vs-angular/">Ractive.js vs Angular</a>
</li>

                        
                            
<li >
    <a href="../../../articles/ractive-vs-react/">Ractive.js vs React</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../references-and-context/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../all-things-template/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/ractivejs/ractive">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#expressions-and-computations">Expressions and Computations</a></li>
        
            <li class="second-level"><a href="#template-expressions">Template Expressions</a></li>
            
                <li class="third-level"><a href="#functions-in-data">Functions in Data</a></li>
            
                <li class="third-level"><a href="#conversion-to-functions">Conversion to Functions</a></li>
            
                <li class="third-level"><a href="#use">Use</a></li>
            
        
            <li class="second-level"><a href="#capture-and-dependencies">Capture and Dependencies</a></li>
            
        
            <li class="second-level"><a href="#computed-properties">Computed Properties</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="expressions-and-computations">Expressions and Computations</h1>
<p>Accessing data directly from within a template is quite useful, but there are some situations in which it is not at all convenient to have values for every possible data point computed ahead of time. To address that, Ractive supports both computed properties at the instance level and expressions within templates, both of which use a dependency tracking system that allows them to update reactively when data on which they depend changes.</p>
<h2 id="template-expressions">Template Expressions</h2>
<p>Ractive's template parser has a fairly complete JavaScript parser inside it, so that it can read plain JS expressions with Ractive references in order to know what expressions need to be recomputed when data changes. Ractive template expressions can be just about any JavaScript (ES5) expression with a few exceptions:</p>
<ul>
<li>Assignments are not permitted i.e. <code>i = 10</code>, <code>a += b</code>, <code>i++</code>, <code>--a</code>, etc.</li>
<li><code>new</code>, <code>delete</code>, and <code>void</code> are not available.</li>
<li>Function literals are not permitted i.e. anything involving the <code>function</code> keyword.</li>
<li>As statements (as opposed to expressions), <code>for</code>, <code>with</code>, <code>if</code>, <code>return</code>, etc are not permitted.</li>
</ul>
<p>Beyond those exceptions, pretty much all of JavaScript is available, including some applicable features from later versions of ECMAScript, like array, object, and argument spread operators.</p>
<h3 id="functions-in-data">Functions in Data</h3>
<p>Any functions that can be referenced within a template can also be called within the template. Functions may exist in an instance's data, among its members accessed using <code>@this</code>, globally via <code>@global</code>, and shared across Ractive instances via <code>@shared</code>. They can be called, as you would expect, by referencing them and using a call operator or method e.g. <code>fn(arg)</code>, <code>fn.call(context, arg)</code>, or <code>fn.apply(context, [arg])</code>.</p>
<h3 id="conversion-to-functions">Conversion to Functions</h3>
<p>After parsing, template expressions have any references extracted into a list of dependencies, and the references are replaced with numbered placeholders. If the parser is in <a href="../../../initialization-options#csp">csp</a> mode, then the parser will create functions for each expression in the template and attach them to the template object's expression cache by name. After reference extraction, expressions are much more generic, so different expressions can end up referencing the same function. For instance, <code>a + b</code> and <code>answer + otherSum</code> both reduce to <code>_0+_1</code>. When the function for that expression is created, either at parse or runtime, it will look like <code>function(_0, _1) { return _0+_1; }</code>.</p>
<p>When the runtime encounters an expression while rendering a template, it will create a special model to stand in as a proxy for the expression. The proxy will have the list of references that expression depends upon along with the function that matches the expression. When asked for a value, the proxy will resolve all of the dependencies to values and call the function with them in the correct order. The function is called inside a <code>try</code>/<code>catch</code> so that any expceptions that may happen inside the expression don't blow up the render.</p>
<h3 id="use">Use</h3>
<p>Template expressions can be used just about anywhere in a template that would accept a regular reference, and in a few additional places, like event directives.</p>
<h2 id="capture-and-dependencies">Capture and Dependencies</h2>
<p>When evaluating an expression or computation, Ractive will keep track of any keypaths accessed via <a href="../../../api/instance-methods#ractiveget"><code>get</code></a> and record those as dependencies of the computation. The mechanism that tracks dependencies in computations is called capture. If any dependency of a computation changes, then the computation will recompute and notify any of it's dependents that it also has a new value.</p>
<blockquote>
<p>Note: that in addition to be reactive, computations are also lazy, meaning that they will not actually compute a value until a dependent asks for the value.</p>
</blockquote>
<h2 id="computed-properties">Computed Properties</h2>
<p>Computed properties are accessible in the same way as references that exist at the root of an instance's viewmodel. They may be read-only or read-write depending on whether or not they have both a getter and a setter. Like expressions, computations use capture to track their dependencies, so changes in a computations dependencies will cause the computation to invalidate and recompute.</p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>©RactiveJS contributors. Ractive.js is a free and open source project released under the MIT license.<br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../../js/jquery-1.10.2.min.js"></script>
    <script src="../../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../../..';
    </script>
    <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
    <script src="../../../js/base.js"></script>
    <script src="../../../js/index.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
