<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="RactiveJS contributors"> 
    <link rel="canonical" href="https://ractive.js.org/concepts/data-binding/dependents/"> 
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="theme-color" content="#557526">

    <title>Dependents - Ractive.js</title>

    <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../../css/base.css" rel="stylesheet">
    <link href="../../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">


    <link href="../../../css/index.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../..">Ractive.js</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../..">Introduction</a>
</li>

                        
                            
<li >
    <a href="../../../get-started/60-second-setup/">60-second Setup</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Learn</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../get-started/tutorials/hello-world/">Hello, world!</a>
</li>

        
            
<li >
    <a href="../../../get-started/tutorials/nested-properties/">Nested Properties</a>
</li>

        
            
<li >
    <a href="../../../get-started/tutorials/expressions/">Expressions</a>
</li>

        
            
<li >
    <a href="../../../get-started/tutorials/events/">Events</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Examples</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../get-started/examples/analog-clock/">Analog Clock</a>
</li>

        
            
<li >
    <a href="../../../get-started/examples/animated-chart/">Animated Chart</a>
</li>

        
            
<li >
    <a href="../../../get-started/examples/comments/">Comments</a>
</li>

        
            
<li >
    <a href="../../../get-started/examples/donut-chart/">Donut Chart</a>
</li>

        
            
<li >
    <a href="../../../get-started/examples/illustration/">Illustration</a>
</li>

        
            
<li >
    <a href="../../../get-started/examples/rating-stars/">Rating Sars</a>
</li>

        
            
<li >
    <a href="../../../get-started/examples/todo-list/">ToDo List</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../../get-started/debugging/">Debugging</a>
</li>

                        
                            
<li >
    <a href="../../../get-started/support/">Support</a>
</li>

                        
                            
<li >
    <a href="../../../get-started/contributing/">Contributing</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../api/initialization-options/">Initialization Options</a>
</li>

                        
                            
<li >
    <a href="../../../api/static-properties/">Static Properties</a>
</li>

                        
                            
<li >
    <a href="../../../api/static-methods/">Static Methods</a>
</li>

                        
                            
<li >
    <a href="../../../api/instance-properties/">Instance Properties</a>
</li>

                        
                            
<li >
    <a href="../../../api/instance-methods/">Instance Methods</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Helper Objects</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../api/helper-objects/node-info/">Node Info</a>
</li>

        
            
<li >
    <a href="../../../api/helper-objects/parse/">Parse</a>
</li>

        
            
<li >
    <a href="../../../api/helper-objects/transition/">Transition</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../../api/attributes/">Attributes</a>
</li>

                        
                            
<li >
    <a href="../../../api/keypath-prefixes/">Keypath Prefixes</a>
</li>

                        
                            
<li >
    <a href="../../../api/special-references/">Special References</a>
</li>

                        
                            
<li >
    <a href="../../../api/component-files/">Component Files</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Extend <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../extend/adaptors/">Adaptors</a>
</li>

                        
                            
<li >
    <a href="../../../extend/components/">Components</a>
</li>

                        
                            
<li >
    <a href="../../../extend/decorators/">Decorators</a>
</li>

                        
                            
<li >
    <a href="../../../extend/easings/">Easings</a>
</li>

                        
                            
<li >
    <a href="../../../extend/events/">Events</a>
</li>

                        
                            
<li >
    <a href="../../../extend/interpolators/">Interpolators</a>
</li>

                        
                            
<li >
    <a href="../../../extend/partials/">Partials</a>
</li>

                        
                            
<li >
    <a href="../../../extend/transitions/">Transitions</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Integrations <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../integrations/loaders/">Loaders</a>
</li>

                        
                            
<li >
    <a href="../../../integrations/plugins/">Plugins</a>
</li>

                        
                            
<li >
    <a href="../../../integrations/tools/">Tools</a>
</li>

                        
                            
<li >
    <a href="../../../integrations/libraries/">Libraries</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Concepts <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Architecture</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../architecture/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../architecture/parser/">Parser</a>
</li>

        
            
<li >
    <a href="../../architecture/model/">Model</a>
</li>

        
            
<li >
    <a href="../../architecture/view/">View</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Data Binding</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../computed-properties/">Computed Properties</a>
</li>

        
            
<li class="active">
    <a href="./">Dependents</a>
</li>

        
            
<li >
    <a href="../observers/">Observers</a>
</li>

        
            
<li >
    <a href="../parallel-dom/">Parallel DOM</a>
</li>

        
            
<li >
    <a href="../two-way-binding/">Two-Way Binding</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Events</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../events/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../events/bubbling/">Bubbling</a>
</li>

        
            
<li >
    <a href="../../events/directives/">Directives</a>
</li>

        
            
<li >
    <a href="../../events/method-calls/">Method Calls</a>
</li>

        
            
<li >
    <a href="../../events/proxy-events/">Proxy Events</a>
</li>

        
            
<li >
    <a href="../../events/publish-subscribe/">Publish-Subscribe</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Rendering</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../rendering/progressive-enhancement/">Progressive Enhancement</a>
</li>

        
            
<li >
    <a href="../../rendering/server-side-rendering/">Server-Side Rendering</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Security</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../security/csp/">CSP</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Templates</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../templates/elements/">Elements</a>
</li>

        
            
<li >
    <a href="../../templates/expressions/">Expressions</a>
</li>

        
            
<li >
    <a href="../../templates/keypaths/">Keypaths</a>
</li>

        
            
<li >
    <a href="../../templates/mustaches/">Mustaches</a>
</li>

        
            
<li >
    <a href="../../templates/parsing/">Parsing</a>
</li>

        
            
<li >
    <a href="../../templates/references/">References</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Articles <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../articles/introducing-ractive-js/">Introducing Ractive.js</a>
</li>

                        
                            
<li >
    <a href="../../../articles/the-origins-of-ractive/">The Origins Of Ractive</a>
</li>

                        
                            
<li >
    <a href="../../../articles/ractive-js-expressions-and-the-new-wave-of-reactive-programming/">Ractive.js Expressions And The New Wave Of Reactive Programming</a>
</li>

                        
                            
<li >
    <a href="../../../articles/ractive-vs-angular/">Ractive.js vs Angular</a>
</li>

                        
                            
<li >
    <a href="../../../articles/ractive-vs-react/">Ractive.js vs React</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../computed-properties/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../observers/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/ractivejs/ractive">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div id="main">
        <div class="container">
            
            <div class="col-md-3" role="subnav"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#indirect-dependencies">Indirect dependencies</a></li>
        
    
        <li class="first-level "><a href="#expressions-with-multiple-dependencies">Expressions with multiple dependencies</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<p>Ractive maintains a <em>dependency graph</em> in order to do the minimum amount of work necessary to keep the DOM up-to-date.</p>
<p>If you inspect a Ractive instance in your console, you'll see a property called <code>_deps</code>. This is where all dependants are listed, indexed by their dependency.</p>
<p>There is also a concept of 'priority', which exists to save us some work. If, for example, a section needs to be removed (perhaps it's a conditional section, and the condition just went from truthy to falsy), there is no point in updating all its children, so we make sure that we teardown the section first. As part of that teardown process, the children - which all have lower priority - unregister themselves as dependants before they get a chance to update.</p>
<h1 id="indirect-dependencies">Indirect dependencies</h1>
<p>If you have a mustache which depends on <code>foo.bar</code>, and <code>foo</code> changes, it's quite possible that the mustache needs to re-render. We say that the mustache has an <em>indirect dependency</em> on <code>foo</code>, or that it has a <em>direct dependency on a downstream keypath</em> of <code>foo</code>.</p>
<p>This relationship is expressed through the <code>_depsMap</code> property of a Ractive instance - whenever <code>foo</code> changes, as well as dealing with direct <code>foo</code> dependants we check the map for those indirect dependants.</p>
<p>In the case of <a href="../../templates/expressions/">expressions</a> and <a href="../observers/">observers</a>, we also need to consider dependants of <em>upstream keypaths</em>. For example, suppose we have a section based on a sorted array - if we modify one of the members of the array, we need to see if the sort order has changed or not as a result:</p>
<pre><code class="html">{{#( sort( list, 'name' ) )}}
  &lt;p&gt;{{name}}&lt;/p&gt;
{{/()}}
</code></pre>

<pre><code class="js">ractive = new Ractive({
  el: myContainer,
  template: myTemplate,
  data: {
    list: [{ name: 'Bob' }, { name: 'Charles' }, { name: 'Alice' }],
    sort: function ( list, property ) {
      return list.slice().sort( function ( a, b ) {
        return a[ property ] &lt; b[ property ] ? -1 : 1;
      });
    }
  }
});

// renders Alice, Bob, Charles

ractive.set( 'list[0].name', 'Zebediah' );

// updates to Alice, Charles, Zebediah
</code></pre>

<p>In the example, setting <code>list[0].name</code> causes dependants of <code>list</code> to be updated.</p>
<p>As well as <a href="../../templates/expressions/">expressions</a>, <a href="../observers/">Observers</a> respond to both upstream and downstream changes.</p>
<h1 id="expressions-with-multiple-dependencies">Expressions with multiple dependencies</h1>
<p>The expression <code>{{ a + b }}</code> has two dependencies - <code>a</code> and <code>b</code> (or more accurately, whatever those <a href="../../templates/references/">references</a> resolve to). The <code>_deps</code> graph actually includes objects representing those individual references, rather than the expression itself - the reference objects then notify the expression (if their value has changed) that it will need to re-evaluate itself.</p>
<p>Because the expression has multiple dependencies, it won't trigger an update straight away - it will wait until all the new data has come in first. So doing <code>ractive.set({ a: 1, b: 2 })</code> will only trigger one update, not two.</p></div>
            
        </div>

        <footer class="col-md-12 text-center">
            <hr>
            <p>
            <small>©RactiveJS contributors. Ractive.js is a free and open source project released under the MIT license.<br></small>
            
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
        </footer>
    </div>

    <script src="../../../js/jquery-1.10.2.min.js"></script>
    <script src="../../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../../..';
    </script>
    <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
    <script src="../../../js/base.js"></script>
    <script src="../../../js/index.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
