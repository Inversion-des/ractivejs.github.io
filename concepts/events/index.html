<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Next-generation DOM manipulation">
  

  
  <link rel="author" href="RactiveJS contributors">
  <link rel="canonical" href="https://ractive.js.org">

  <title>Ractive.js</title>

  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro|Voltaire">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/g/highlight.js@9.11.0(styles/default.min.css),pure@0.6.2(pure-min.css+grids-responsive-min.css)">
  <link rel="stylesheet" href="../../theme.css">

  <link rel="stylesheet" href="/static/css/index.css">

  
</head>

<body>
  <input class="menu-state" type="checkbox" name="menu-state" id="menu-state">
  <label class="menu-toggle" for="menu-state"></label>

  <div class="nav-side pure-menu pure-menu-fixed pure-menu-scrollable">
  <ul class="pure-menu-list">
    
      <li class="pure-menu-item ">
        <a class="pure-menu-link pure-menu-heading" href="../..">Ractive.js</a>
      </li>
      
      </li>
    
      <li class="pure-menu-item ">
        <a class="pure-menu-link pure-menu-heading" href="">Get Started</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/hello-world/">Hello, world!</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/nested-properties/">Nested Properties</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/expressions/">Expressions</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/events/">Events</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/conditional-sections/">Conditional Sections</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/iterative-sections/">Iterative Sections</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/two-way-binding/">Two-way Binding</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/partials/">Partials</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/triples-embedded-html/">Triples (Embedded HTML)</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/components/">Components</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/animation/">Animations</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/svg/">SVG</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/transitions/">Transitions</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/tutorials/decorators/">Decorators</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/support/">Support</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../get-started/migrating/">Migrating</a>
        </li>
      
      </li>
    
      <li class="pure-menu-item ">
        <a class="pure-menu-link pure-menu-heading" href="">API</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/initialization-options/">Initialization Options</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/static-properties/">Static Properties</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/static-methods/">Static Methods</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/instance-properties/">Instance Properties</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/instance-methods/">Instance Methods</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/attributes/">Attributes</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/keypath-prefixes/">Keypath Prefixes</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/special-references/">Special References</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/context/">Context Object</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/parse/">Parse</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/transition/">Transition</a>
        </li>
      
      </li>
    
      <li class="pure-menu-item ">
        <a class="pure-menu-link pure-menu-heading" href="">Extend</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../extend/adaptors/">Adaptors</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../extend/components/">Components</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../extend/decorators/">Decorators</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../extend/easings/">Easings</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../extend/events/">Events</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../extend/interpolators/">Interpolators</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../extend/partials/">Partials</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../extend/transitions/">Transitions</a>
        </li>
      
      </li>
    
      <li class="pure-menu-item ">
        <a class="pure-menu-link pure-menu-heading" href="">Integrations</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../api/component-files/">Component Files</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../integrations/loaders/">Loaders</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../integrations/plugins/">Plugins</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../integrations/tools/">Tools</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../../integrations/libraries/">Libraries</a>
        </li>
      
      </li>
    
      <li class="pure-menu-item pure-menu-selected">
        <a class="pure-menu-link pure-menu-heading" href="">Concepts</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../architecture/">Architecture</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../rendering/">Rendering</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../security/">Security</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../data-binding/">Data Binding</a>
        </li>
      
        <li class="pure-menu-item pure-menu-selected">
          <a class="pure-menu-link" href="./">Events</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="../templates/">Templates</a>
        </li>
      
      </li>
    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/ractivejs/ractive">Github</a>
    </li>
  </ul>
</div>

  <div class="main">
    <div class="main__header">
      <div class="nav-main pure-menu pure-menu-horizontal pure-menu-fixed">
  <div class="pure-g">
    <div class="pure-u-1 pure-u-lg-1-6"></div>
    <div class="pure-u-1 pure-u-lg-2-3">
      <ul class="pure-menu-list">
        
          
            <li class="pure-menu-item ">
              <a class="pure-menu-link" href="../..">Ractive.js</a>
            </li>
          
        
          
            <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover ">
                <span class="pure-menu-link">Get Started</span>
                <ul class="pure-menu-children">
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/hello-world/">Hello, world!</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/nested-properties/">Nested Properties</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/expressions/">Expressions</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/events/">Events</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/conditional-sections/">Conditional Sections</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/iterative-sections/">Iterative Sections</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/two-way-binding/">Two-way Binding</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/partials/">Partials</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/triples-embedded-html/">Triples (Embedded HTML)</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/components/">Components</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/animation/">Animations</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/svg/">SVG</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/transitions/">Transitions</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/tutorials/decorators/">Decorators</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/support/">Support</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../get-started/migrating/">Migrating</a>
                    </li>
                  
                </ul>
            </li>
          
        
          
            <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover ">
                <span class="pure-menu-link">API</span>
                <ul class="pure-menu-children">
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/initialization-options/">Initialization Options</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/static-properties/">Static Properties</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/static-methods/">Static Methods</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/instance-properties/">Instance Properties</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/instance-methods/">Instance Methods</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/attributes/">Attributes</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/keypath-prefixes/">Keypath Prefixes</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/special-references/">Special References</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/context/">Context Object</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/parse/">Parse</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/transition/">Transition</a>
                    </li>
                  
                </ul>
            </li>
          
        
          
            <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover ">
                <span class="pure-menu-link">Extend</span>
                <ul class="pure-menu-children">
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../extend/adaptors/">Adaptors</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../extend/components/">Components</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../extend/decorators/">Decorators</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../extend/easings/">Easings</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../extend/events/">Events</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../extend/interpolators/">Interpolators</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../extend/partials/">Partials</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../extend/transitions/">Transitions</a>
                    </li>
                  
                </ul>
            </li>
          
        
          
            <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover ">
                <span class="pure-menu-link">Integrations</span>
                <ul class="pure-menu-children">
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../api/component-files/">Component Files</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../integrations/loaders/">Loaders</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../integrations/plugins/">Plugins</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../integrations/tools/">Tools</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../../integrations/libraries/">Libraries</a>
                    </li>
                  
                </ul>
            </li>
          
        
          
            <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover pure-menu-selected">
                <span class="pure-menu-link">Concepts</span>
                <ul class="pure-menu-children">
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../architecture/">Architecture</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../rendering/">Rendering</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../security/">Security</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../data-binding/">Data Binding</a>
                    </li>
                  
                    <li class="pure-menu-item pure-menu-selected">
                      <a class="pure-menu-link" href="./">Events</a>
                    </li>
                  
                    <li class="pure-menu-item ">
                      <a class="pure-menu-link" href="../templates/">Templates</a>
                    </li>
                  
                </ul>
            </li>
          
        
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://github.com/ractivejs/ractive">Github</a>
        </li>
      </ul>
    </div>
  </div>
</div>
    </div>
    <div class="main__page">
      
  <div class="pure-g">
    <div class="pure-u-1 pure-u-lg-1-6"></div>
    <div class="pure-u-1 pure-u-lg-2-3">
      <div class="pure-g">
        <div class="pure-u-1 pure-u-md-1-4">
          <div class="main__sidebar">
            <div class="toc pure-menu pure-menu-scrollable">
  <ul class="pure-menu-list">
    
      <li class="pure-menu-item pure-menu-selected">
        <a class="pure-menu-link pure-menu-heading" href="#overview">Overview</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#hygiene">Hygiene</a>
        </li>
      
      </li>
    
      <li class="pure-menu-item ">
        <a class="pure-menu-link pure-menu-heading" href="#bubbling">Bubbling</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#cancelling">Cancelling</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#the-eventcomponent-property">The event.component Property</a>
        </li>
      
      </li>
    
      <li class="pure-menu-item ">
        <a class="pure-menu-link pure-menu-heading" href="#directives">Directives</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#cancelling-dom-events">Cancelling DOM Events</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#custom-events">Custom events</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#component-event-directives">Component event directives</a>
        </li>
      
      </li>
    
      <li class="pure-menu-item ">
        <a class="pure-menu-link pure-menu-heading" href="#method-calls">Method calls</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#cancelling-events">Cancelling events</a>
        </li>
      
      </li>
    
      <li class="pure-menu-item ">
        <a class="pure-menu-link pure-menu-heading" href="#proxy-events">Proxy events</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#event-arguments">Event arguments</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#cancelling-dom-events_1">Cancelling DOM events</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#reserved-event-names">Reserved event names</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#dynamic-proxy-event-names">Dynamic proxy event names</a>
        </li>
      
      </li>
    
      <li class="pure-menu-item ">
        <a class="pure-menu-link pure-menu-heading" href="#publish-subscribe">Publish Subscribe</a>
      </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#subscribe">Subscribe</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#unsubscribe">Unsubscribe</a>
        </li>
      
        <li class="pure-menu-item ">
          <a class="pure-menu-link" href="#publish">Publish</a>
        </li>
      
      </li>
    
  </ul>
</div>
          </div>
        </div>
        <div class="pure-u-1 pure-u-md-3-4">
          <div class="main__content">
            <h1 id="overview">Overview</h1>
<p>Like many libraries, Ractive implements the <a href="http://addyosmani.com/blog/understanding-the-publishsubscribe-pattern-for-greater-javascript-scalability/">publish/subscribe</a> mechanism to allow you to respond to, or trigger, particular events.</p>
<pre><code class="js">ractive = new Ractive({
  el: 'body',
  template: '&lt;button on-click=&quot;activate&quot;&gt;click me!&lt;/button&gt;'
});

ractive.on( 'activate', function ( event ) {
  alert( 'Activating!' );
});
</code></pre>

<p>There are actually two-levels of event handling in Ractive:</p>
<blockquote>
<p>The lower-level interaction with DOM events or <a href="">custom events</a>. These are specified using <a href="">Event directives</a> that also specify how the event is to be handled using either <a href="">proxy events</a> or <a href="">method calls</a>.</p>
<p>The <a href="">publish-subscribe</a> api and event system within Ractive and between components. Proxy events bridge the DOM event into a Ractive event, whereas method calls directly invoke the ractive instance and do not use the pub/sub infrastructure.</p>
</blockquote>
<p><br>
The <a href="">publish-subscribe</a> event handling in Ractive allows you to consistently handle three different categories of generated events:</p>
<ul>
<li><a href="">Proxy events</a>, mentioned above, proxy DOM and custom events defined in your template</li>
<li><a href="">Method calls</a> are a more powerful alternative to proxy events that allow you to execute one or more expressions when an event fires.</li>
<li><a href="">Lifecycle events</a> generated by each ractive instance - such as <code>init</code>, <code>render</code> and <code>teardown</code></li>
<li><a href="">Custom events</a> fired in code using <a href="../../../api/instance-properties#ractive.fire()"><code>ractive.fire()</code></a>, which can be anything you like</li>
</ul>
<h2 id="hygiene">Hygiene</h2>
<p>One of the advantages of using Ractive events is that, in addition to being able to manually unsubscribe events, both DOM events and
Ractive Events will be automatically unsubscribed when the ractive instance or component is torndown.</p>
<p>In practice, this means adding a template directive like <code>on-click='select'</code> is all that is needed to manage the DOM event.</p>
<h1 id="bubbling">Bubbling</h1>
<p>Events that fire in components will bubble up the view hierarchy - <a href="http://jsfiddle.net/rich_harris/cdvehp1t/">see this demonstration</a>. Bubbling events are namespaced by the element name used for that component in the template:</p>
<pre><code class="js">ractive = new Ractive({
    el: document.body,
    template: '&lt;widget/&gt;',
    components: {
        widget: Ractive.extend({
            template: '&lt;button on-click=&quot;select&quot;&gt;Select Me&lt;/button&gt;'
        })
    },
    oninit: function () {
        this.on( 'widget.select', function () {
            alert('selected!');
        });
    }
});
</code></pre>

<p>The event will continue to bubble up under the name of the originating component, not the name of each parent component.</p>
<h2 id="cancelling">Cancelling</h2>
<p>Returning <code>false</code> from an event handler will prevent that event from bubbling further:</p>
<pre><code class="js">this.on( 'widget.select', function () {
    return false;
});

</code></pre>

<p>Sibling event handlers will still be called. Cancelling only applies to bubbling up to the next level of the view hierarchy.</p>
<p>Note that returning <code>false</code> has a dual purpose of both cancelling the view hierarchy event bubbling <strong>and</strong> cancelling the DOM Event if the event was DOM-based.</p>
<p>Template directives for handling component events <em>implicitly</em> cancel bubbling of the subscribed event:</p>
<pre><code class="html">&lt;widget on-foo='bar'/&gt;
</code></pre>

<p>In this example, <code>widget.foo</code> will not bubble. Instead a new event <code>bar</code> will be fired and bubbled, assuming the above template is also contained in a component, under the name of the new component.</p>
<h2 id="the-eventcomponent-property">The <code>event.component</code> Property</h2>
<p>Events that bubble add a <code>component</code> property to the event object that is the component ractive instance raising the event:</p>
<pre><code class="js">this.on( 'widget.select', function ( event ) {
    event.component.observe( 'foo', function ( n, o, k ) {
        console.log( 'foo changed from', o, 'to', n );
    });
});

</code></pre>

<h1 id="directives">Directives</h1>
<p>DOM events are handled with template directives that take the form of element attributes, similar to global native DOM handlers, but are prefixed with <code>on-</code> plus the name of the event:</p>
<pre><code class="html">&lt;button on-click=&quot;activate&quot;&gt;click me!&lt;/button&gt;
</code></pre>

<p>You can assign multiple events by separating them with a hyphen:</p>
<pre><code class="html">&lt;div on-mouseover-mousemove='@this.set( &quot;hover&quot;, true )'&gt;...&lt;/div&gt;
</code></pre>

<p>The structure of the attribute content will vary depending on whether you are using <a href="">proxy events</a> (the first example) or <a href="">method calls</a> (the second example). See each respective section for more details.</p>
<p>DOM events can be any supported event on the element node. Touch events - <code>touchstart</code>, <code>touchmove</code>, <code>touchend</code>, <code>touchcancel</code>, and <code>touchleave</code> (not w3c, but supported in some browsers) - can be used as well, and will be safely ignored if not supported by the current browser.</p>
<p>DOM Events will be automatically unsubscribed when the ractive instance is torndown.</p>
<h2 id="cancelling-dom-events">Cancelling DOM Events</h2>
<p>See <a href="">publish-subscribe</a> for information on automatically stopping DOM event propagation and default action.</p>
<h2 id="custom-events">Custom events</h2>
<p>In addition to all the usual DOM events, you can use <em>custom events</em> via <a href="">event plugins</a>. These allow you to define what conditions on the node should generate a directive-level event.</p>
<p>For example, you could add gesture support to your app with <a href="https://github.com/rstacruz/ractive-touch">ractive-touch</a>, which integrates <a href="http://hammerjs.github.io/">Hammer.js</a> with Ractive.</p>
<p>Once defined, the custom event can then be used like any other event directive:</p>
<pre><code class="html">&lt;div on-swipeleft=&quot;nextPage&quot;&gt;...&lt;/div&gt;
</code></pre>

<p>Be aware that custom event names take precedence over native DOM event names.</p>
<h2 id="component-event-directives">Component event directives</h2>
<p>Template component elements can also have event directives:</p>
<pre><code class="html">&lt;my-widget on-foo=&quot;bar&quot;/&gt;
</code></pre>

<p>However, there are some differences and limitations to component event directives:</p>
<ul>
<li>These only respond to component raised events and are not DOM event or custom event subscriptions.</li>
<li>Arguments to proxy events are ignored</li>
<li>Method calls are not currently supported</li>
<li>Pattern matching <strong>is</strong> supported (see <a href="">publish-subscribe</a>):</li>
</ul>
<pre><code class="html">&lt;my-widget on-foo.*=&quot;bar&quot;/&gt;
</code></pre>

<h1 id="method-calls">Method calls</h1>
<p><strong>Note:</strong> Unqualified event method calls are deprecated and have been replaced with event expressions that resolve the same way as every other expression in a Ractive template. This means that to call, for instance, <code>set('foo', 'bar')</code> in an event, you would now use <code>@this.set('foo', 'bar')</code>. Unfortunately, this adds a bit of boilerplate to common method calls, but it is also resolves the disparity between event directives and other template references, allows calling data methods from events, and allows executing multiple, possibly more complex, expressions when an event fires.</p>
<p>As an alternative to <a href="#directives">event directive</a>, right from your template:</p>
<pre><code class="html">&lt;p&gt;foo is {{foo}}&lt;/p&gt;
&lt;button on-click='@this.toggle(&quot;foo&quot;)'&gt;toggle foo&lt;/button&gt;
</code></pre>

<p>In this case, because <a href="../../../api/instance-properties#ractivetoggle"><code>ractive.toggle()</code></a> is a built-in method, clicking the button will toggle the value of <code>foo</code> between <code>true</code> and <code>false</code> (<a href="http://jsfiddle.net/rich_harris/xxg93vw8/">demo</a>).</p>
<p>This also works with custom methods:</p>
<pre><code class="js">var ractive = new Ractive({
  el: 'body',
  template: '&lt;button on-click=&quot;@this.klaxon()&quot;&gt;sound the klaxon&lt;/button&gt;',
  audio: new Audio( 'klaxon.mp3' ),
  klaxon: function () {
    this.audio.play();
  }
});
</code></pre>

<p>You can pass as many arguments to the method as you like, including data references:</p>
<pre><code class="html">{{#each items :i}}
  &lt;button on-click='@this.select(this,i)'&gt;select this item&lt;/button&gt;
{{/each}}
</code></pre>

<p>Notice that mustaches are <strong>not</strong> used with data reference in method calls, i.e. <code>{{i}}</code> and will cause errors if they are. String literals need to be in quotes:</p>
<pre><code class="html">&lt;button on-click='@this.set(&quot;foo&quot;, true)'&gt;make foo true&lt;/button&gt;
</code></pre>

<p>You can also pass the <code>event</code> object, or properties thereof (<code>event.original</code> is the original DOM event) (<a href="http://jsfiddle.net/rich_harris/9ecvjjtm/">demo</a>):</p>
<pre><code class="html">&lt;div
  on-mousemove='@this.set({
    x: event.original.clientX,
    y: event.original.clientY
  })'
  on-mouseleave='@this.set({
    x: &quot;unknown&quot;,
    y: &quot;unknown&quot;
  })'
&gt;
  &lt;p&gt;current mouse position: {{x}} x {{y}}&lt;/p&gt;
&lt;/div&gt;
</code></pre>

<p>The <code>event</code> object is also available within body of the method call function as <code>this.event</code>. Note that methods on your Ractive instance that may handle your events are effectively part of your public API, and <code>this.event</code> will only be available during invocations triggered by an event.</p>
<p>The <code>event</code> argument is also extended with contextual helper methods. See <a href="../../api/context/">context objects</a>.</p>
<p>If you need to evaluate multiple expressions from an event directive, simply separate them with a <code>,</code>. For instance:</p>
<pre><code class="html">{{#each someList as item}}
&lt;div&gt;
  {{item.display}}
  &lt;a href=&quot;#&quot; on-click=&quot;event.pop('../'), @this.notifyUser('item removed!'), false&quot;&gt;
    Remove and Notify
  &lt;/a&gt;
&lt;/div&gt;
{{/each}}
</code></pre>

<p>Note that this is a list of independent expressions, and as long as one doesn't throw, they will all be evaluated.</p>
<h2 id="cancelling-events">Cancelling events</h2>
<p>As with proxy events, you can cancel a DOM event by returning <code>false</code> from your event handler. Ractive with then call <code>preventDefault()</code> and <code>stopPropagation()</code> on the original DOM event. You can also call any methods on the original event by having it passed to your handler or accessing it using <code>this.event.original</code>. With event expressions, you can force the cancellation regardless of the return from any methods you call by simply including <code>false</code> as the last expression in your list, as above in the 'Remove and Notify' example. You can also override cancellation in much the same way by using <code>true</code> instead of <code>false</code>.</p>
<h1 id="proxy-events">Proxy events</h1>
<p>Ractive has a concept of <em>proxy events</em>, which translate a user <em>action</em> (e.g. a mouseclick) defined via an <a href="#directives">event directive</a> into an <em>intention</em> (e.g. 'select this option'). This allows you to handle user interaction in a readable, declarative fashion, without resorting to peppering your markup with class names to use as 'hooks' (which must then be kept consistent between your markup and your JavaScript code).</p>
<p>As with all events in Ractive, you subscribe with <a href="../../../api/instance-properties#ractiveon"><code>ractive.on()</code></a> (also see <a href="#publish-subscribe">publish-subscribe</a>). Proxy events declare the handler name of the event that will be fired, along with any optional arguments:</p>
<pre><code class="js">ractive = new Ractive({
  el: 'body',
  template: '&lt;button on-click=&quot;activate&quot;&gt;click me!&lt;/button&gt;'
});

ractive.on( 'activate', function ( event ) {
  alert( 'Activating!' );
});
</code></pre>

<p>In this example, it is <code>activate</code> (and not <code>click</code>!) that is the name of the handler event that will be fired for any registered handlers created via <a href="../../../api/instance-properties#ractiveon"><code>ractive.on()</code></a>.</p>
<h2 id="event-arguments">Event arguments</h2>
<h3 id="the-event-object">The <code>event</code> object</h3>
<p>The first argument to a proxy event handler is always a Ractive <code>event</code> object. It contains various properties:</p>
<ul>
<li><code>event.name</code> - the name of the event, in this case 'activate'</li>
<li><code>event.node</code> - the DOM node in question</li>
<li><code>event.keypath</code> - the <a href="../templates/#keypaths">keypath</a> of the current context</li>
<li><code>event.context</code> - the value of <code>this.get(event.keypath)</code></li>
<li><code>event.index</code> - a map of index references</li>
<li><code>event.component</code> - the component that raised the event, only present on <a href="#bubbling">bubbled events</a></li>
<li><code>event.original</code> - the original DOM event, if available</li>
</ul>
<p>In the example above, <code>event.keypath</code> might be <code>items.0</code> for the first item in the list, <code>items.1</code> for the second, and so on. The <code>event.index</code> map would have a property <code>i</code>, which would correspond to those indices.</p>
<p>The event object is also available in event handlers using <code>this.event</code>, see <a href="#publish-subscribe">publish-subscribe</a> for more details.</p>
<h3 id="custom-arguments">Custom arguments</h3>
<p><strong>NOTE:</strong> Arguments to proxy events have been deprecated because they are too easy to break. If you need to pass arguments with your event, you can use <code>@this.fire('myEvent', event, arg1, arg2, etc)</code>.</p>
<p>We might want to pass arguments to our handler in addition to the <code>event</code> object. We can do that by listing them, comma-separated, after the event name:</p>
<pre><code class="html">&lt;h1&gt;Let's shop!&lt;/h1&gt;
&lt;ul&gt;
  {{#each items: i}}
    &lt;li&gt;
      &lt;p&gt;{{i+1}}: {{description}}&lt;/p&gt;
      &lt;label&gt;&lt;input value='{{qty}}'&gt; Quantity&lt;/label&gt;

      &lt;!-- when the user clicks this button, add {{qty}} of this item --&gt;
      &lt;button on-click='addToCart:{{this}},{{qty}}'&gt;Add to cart&lt;/button&gt;
    &lt;/li&gt;
  {{/each}}
&lt;/ul&gt;
</code></pre>

<pre><code class="js">ractive.on( 'addToCart', function ( event, item, qty ) {
  /* code goes here */
});
</code></pre>

<h2 id="cancelling-dom-events_1">Cancelling DOM events</h2>
<p>If you return <code>false</code> from a proxy event handler, ractive will automatically call both <code>preventDefault()</code> and <code>stopPropagation()</code> on the original DOM event.</p>
<p>Note that returning <code>false</code> has a dual purpose of both cancelling further bubbling up the view hierarchy <a href="#bubbling">event bubbling</a> <strong>as well as</strong> cancelling the DOM Event if the event was DOM-based.</p>
<p>If you only want to cancel the DOM event, you can call the appropriate methods directly on <code>event.original</code> or <code>this.event.original</code>, which are both references to the current DOM event object.</p>
<h2 id="reserved-event-names">Reserved event names</h2>
<p>Note: the built-in <a href="">lifecycle events</a> are <strong>reserved</strong>, which means you can't use their names as proxy events.</p>
<h2 id="dynamic-proxy-event-names">Dynamic proxy event names</h2>
<p><a href="../templates/#mustaches">Mustache references</a> can be used as proxy event names:</p>
<pre><code class="html">&lt;button on-click=&quot;{{handler}}&quot;&gt;click me!&lt;/button&gt;
</code></pre>

<p>In practive this is of limited value, but a more important side effect is that if no handler is specified (a falsey value) the DOM event is not subscribed and will unsubscribe or resubscribe as the handler value changes. Combined with a conditional section, this allows a proxy event to be conditionally subscribed <em>at the DOM level</em>:</p>
<pre><code class="html">&lt;button on-click=&quot;{{#active}}select{{/}}&quot;&gt;click me!&lt;/button&gt;
</code></pre>

<p>In this example, the DOM <code>click</code> event is subscribed and unsubscribed as the value of <code>active</code> is truthy or falsey.</p>
<h1 id="publish-subscribe">Publish Subscribe</h1>
<p>Like many libraries, Ractive implements the <a href="http://addyosmani.com/blog/understanding-the-publishsubscribe-pattern-for-greater-javascript-scalability/">publish/subscribe</a> mechanism to allow you to respond to, or trigger, particular events.</p>
<h2 id="subscribe">Subscribe</h2>
<p>To subscribe to an event, use <a href="../../../api/instance-properties#ractive.on()"><code>ractive.on()</code></a>:</p>
<pre><code class="js">ractive = new Ractive({
  el: 'body',
  template: '&lt;button on-click=&quot;activate&quot;&gt;click me!&lt;/button&gt;'
});

ractive.on( 'activate', function () {
  alert( 'Activating!' );
});
</code></pre>

<p>This can be used to subscribe to any of the following type of events:</p>
<ul>
<li><a href="">Proxy events</a> for DOM and custom events defined in your template</li>
<li><a href="">Lifecycle events</a> generated by each ractive instance - such as <code>init</code>, <code>render</code> and <code>teardown</code></li>
<li><a href="">Custom events</a> fired in code using <a href="../../api/instance-properties/#ractivefire"><code>ractive.fire()</code></a>, which can be anything you like, see below.</li>
</ul>
<h3 id="multiple-events-to-one-handler">Multiple events to one handler</h3>
<p>You can subscribe a handler to more than one event by separating event names with a space:</p>
<pre><code class="js">ractive.on( 'activate select', function () {...} );
</code></pre>

<p>This example will fire for either an <code>activate</code> event or a <code>select</code> event.</p>
<h3 id="object-map-of-multiple-eventhandler-pairs">Object map of multiple event/handler pairs</h3>
<p>Multiple hander/function pairs can be subscribed using an object hash:</p>
<pre><code class="js">ractive.on({
    activate: function () {...},
    select: function () {...}
});
</code></pre>

<h3 id="wildcard-pattern-handlers">Wildcard pattern handlers</h3>
<p>Event names that use a keypath-like name can be subscribed using the pattern-matching wildcard "<code>*</code>" for any name path segment:</p>
<pre><code class="js">ractive.on( 'foo.*', function () {...} );
</code></pre>

<p>This example will fire on any event name that starts with <code>foo.</code> - <code>foo.active</code>, <code>foo.select</code>, etc.</p>
<p>This is very useful with <a href="">event bubbling</a> and auto-prefixed event names that bubble up from components.</p>
<p>Be aware that handlers like <code>widget.*</code> or <code>*</code> will fire for <em>all</em> matching events, including <a href="">lifecycle events</a>.</p>
<h3 id="accessing-the-event-object">Accessing the event object</h3>
<p>In addition to the event argument that is passed with proxy events, the event object can be accessed using <code>this.event</code> in the function body of any handler. This object is also present in non-proxy events including lifecycle events, though it includes a more limited set of properties.</p>
<p>Properties on all <code>this.event</code> objects:</p>
<ul>
<li><code>this.event.name</code> - the name of the event</li>
<li><code>this.event.context</code> - the value of <code>this.get(event.keypath)</code> or <code>ractive.get()</code> for non-proxy events</li>
<li><code>this.event.component</code> - the component that raised the event, only present on <a href="">bubbled events</a></li>
<li><code>this.event.original</code> - the original DOM event, if available</li>
</ul>
<p>Properties only on proxy events:
<em> <code>this.event.node</code> - the DOM node in question
</em> <code>this.event.keypath</code> - the <a href="">keypath</a> of the current context
* <code>this.event.index</code> - a map of index references</p>
<p>One useful aspect of <code>this.event</code> is that the name of the event can be determined when wildcards are used:</p>
<pre><code class="js">ractive.on( 'foo.*', function () {
    console.log( this.event.name );
});
</code></pre>

<h3 id="cancelling-dom-events_2">Cancelling DOM events</h3>
<p>If you return 'false' from a proxy event handler, ractive will automatically call both <code>preventDefault()</code> and <code>stopPropagation()</code> on the original DOM event.</p>
<p>Note that returning <code>false</code> has a dual purpose of both cancelling the view hierarchy <a href="">event bubbling</a> <strong>as well as</strong> cancelling the DOM Event if the event was DOM-based.</p>
<h2 id="unsubscribe">Unsubscribe</h2>
<p>Event handlers are automatically removed if the instance is torn down (e.g. with <a href="../../../api/instance-properties#ractive.teardown()"><code>ractive.teardown()</code></a>) (which also happens as components are removed due to template/data logic).</p>
<p>You can also unsubscribe event handlers manually using one of two approaches:</p>
<pre><code class="js">var listener = ractive.on( 'activate', function () {
  alert( 'Activating!' );
});

// later...
listener.cancel();
</code></pre>

<p>or...</p>
<pre><code class="js">var handler = function () {
  alert( 'Activating!' );
};

ractive.on( 'activate', handler );

// later...
ractive.off( 'activate', handler );
</code></pre>

<p>In the second case, note that if you don't specify a handler, all 'activate' handlers will be removed. If you don't specify an event name, <strong>all</strong> event handlers will be removed from the instance. See <a href="../../../api/instance-properties#ractive.off()"><code>ractive.off()</code></a> for more detail.</p>
<p>The <code>ractive.off()</code> method is chainable for easily replacing subscribtions:</p>
<pre><code class="js">ractive.off( 'activate' ).on( 'activate', function () {...} );
</code></pre>

<h2 id="publish">Publish</h2>
<p>In addition to the built-in <a href="">lifecycle events</a> and <a href="">proxy events</a>, you can fire your own events with <a href="../../../api/instance-properties#ractive.fire()"><code>ractive.fire()</code></a>.</p>
<p>This is most useful in the context of a <a href="">component</a> that needs to emit custom events. Here's a (somewhat contrived) example:</p>
<pre><code class="js">var Ticker = Ractive.extend({
  oninit: function () {
    var i = 1;

    this.interval = setInterval( function () {
      this.fire( 'tick', i++ );
    }.bind( this ), 1000 );
  },
  onteardown: function () {
    clearInterval( this.interval );
  }
});

var ticker = new Ticker();

ticker.on( 'tick', function ( i ) {
  console.log( i % 2 ? 'tick' : 'tock' );
});
</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>

    </div>
    <div class="main__footer">
      <div class="page-controls">
  <a class="page-controls__link" rel="edit" href="https://github.com/ractivejs/ractivejs.github.io/edit/dev/docs/concepts/events.md" target="_blank">Edit this page</a>
</div>

<div class="badges">
  <a href="https://gitter.im/ractivejs/ractive"><img src="https://img.shields.io/gitter/room/ractivejs/ractive.svg?style=flat-square" alt="Gitter chat"></a>
  <a href="https://www.npmjs.com/package/ractive"><img src="https://img.shields.io/npm/v/ractive.svg?style=flat-square" alt="npm version"></a>
  <a href="https://david-dm.org/RactiveJS/Ractive#info=devDependencies"><img src="https://img.shields.io/david/dev/ractivejs/ractive.svg?style=flat-square" alt="devDependency Status"></a>
  <a href="https://travis-ci.org/ractivejs/ractive"><img src="https://img.shields.io/travis/ractivejs/ractive/dev.svg?style=flat-square" alt="Build Status"></a>
  <a href="https://coveralls.io/github/ractivejs/ractive?branch=dev"><img src="https://img.shields.io/coveralls/ractivejs/ractive/dev.svg?style=flat-square" alt="Coverage Status"></a>
  <a href="https://www.npmjs.com/package/ractive"><img src="https://img.shields.io/npm/dm/ractive.svg?style=flat-square" alt="npm downloads"></a>
  <a href="https://twitter.com/ractivejs"><img src="https://img.shields.io/twitter/follow/ractivejs.svg?style=flat-square" alt="Twitter Follow"></a>
</div>

<p class="credits">©RactiveJS contributors. Ractive.js is a free and open source project released under the MIT license.</p>
    </div>
  </div>

  <script src="//cdn.jsdelivr.net/g/jquery@3.2.1,highlight.js@9.11.0"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script src="../../static/js/index.js"></script>
</body>

</html>