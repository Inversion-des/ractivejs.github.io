<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="RactiveJS contributors"> 
    <link rel="canonical" href="https://ractive.js.org/Concepts/Data Binding/Dependents/"> 
    <link rel="shortcut icon" href="../../../img/favicon.ico">

    <title>Dependents - Ractive.js</title>

    <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../../css/base.css" rel="stylesheet">
    <link href="../../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">


    <link href="../../../css/index.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../..">Ractive.js</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../..">Introduction</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Examples</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../Get Started/Examples/Chart/">Animated Chart</a>
</li>

        
            
<li >
    <a href="../../../Get Started/Examples/Clock/">Clock</a>
</li>

        
            
<li >
    <a href="../../../Get Started/Examples/Comments/">Comments</a>
</li>

        
            
<li >
    <a href="../../../Get Started/Examples/Components/">Components</a>
</li>

        
            
<li >
    <a href="../../../Get Started/Examples/Illustration/">Illustration</a>
</li>

        
            
<li >
    <a href="../../../Get Started/Examples/Infinite Scroll/">Infinite Scroll</a>
</li>

        
            
<li >
    <a href="../../../Get Started/Examples/Backbone/">Backbone</a>
</li>

        
            
<li >
    <a href="../../../Get Started/Examples/Ratings/">Ratings</a>
</li>

        
            
<li >
    <a href="../../../Get Started/Examples/Todos/">Todos</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../../Get Started/Debugging/">Debugging</a>
</li>

                        
                            
<li >
    <a href="../../../Get Started/Support/">Support</a>
</li>

                        
                            
<li >
    <a href="../../../Get Started/Contributing/">Contributing</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../API/Initialization Options/">Initialization Options</a>
</li>

                        
                            
<li >
    <a href="../../../API/Static Properties/">Static Properties</a>
</li>

                        
                            
<li >
    <a href="../../../API/Static Methods/">Static Methods</a>
</li>

                        
                            
<li >
    <a href="../../../API/Instance Properties/">Instance Properties</a>
</li>

                        
                            
<li >
    <a href="../../../API/Instance Methods/">Instance Methods</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Helper Objects</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../API/Helper Objects/Node Info/">Node Info</a>
</li>

        
            
<li >
    <a href="../../../API/Helper Objects/Parse/">Parse</a>
</li>

        
            
<li >
    <a href="../../../API/Helper Objects/Transition/">Transition</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../../API/Errors/">Errors</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Integrations <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../Integrations/Plugins/">Plugins</a>
</li>

                        
                            
<li >
    <a href="../../../Integrations/Tools/">Tools</a>
</li>

                        
                            
<li >
    <a href="../../../Integrations/Libraries/">Libraries</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Extend <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../Extend/Adaptors/">Adaptors</a>
</li>

                        
                            
<li >
    <a href="../../../Extend/Components/">Components</a>
</li>

                        
                            
<li >
    <a href="../../../Extend/Decorators/">Decorators</a>
</li>

                        
                            
<li >
    <a href="../../../Extend/Easings/">Easings</a>
</li>

                        
                            
<li >
    <a href="../../../Extend/Events/">Events</a>
</li>

                        
                            
<li >
    <a href="../../../Extend/Interpolators/">Interpolators</a>
</li>

                        
                            
<li >
    <a href="../../../Extend/Partials/">Partials</a>
</li>

                        
                            
<li >
    <a href="../../../Extend/Transitions/">Transitions</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Concepts <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Architecture</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../Architecture/Overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../Architecture/Parser/">Parser</a>
</li>

        
            
<li >
    <a href="../../Architecture/Model/">Model</a>
</li>

        
            
<li >
    <a href="../../Architecture/View/">View</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Data Binding</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../Array Modification/">Array Modification</a>
</li>

        
            
<li >
    <a href="../Computed Properties/">Computed Properties</a>
</li>

        
            
<li class="active">
    <a href="./">Dependents</a>
</li>

        
            
<li >
    <a href="../Magic Mode/">Magic Mode</a>
</li>

        
            
<li >
    <a href="../Observers/">Observers</a>
</li>

        
            
<li >
    <a href="../Parallel DOM/">Parallel DOM</a>
</li>

        
            
<li >
    <a href="../Two-Way Binding/">Two-Way Binding</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Events</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../Events/Overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../Events/Bubbling/">Bubbling</a>
</li>

        
            
<li >
    <a href="../../Events/Directives/">Directives</a>
</li>

        
            
<li >
    <a href="../../Events/Method Calls/">Method Calls</a>
</li>

        
            
<li >
    <a href="../../Events/Proxy Events/">Proxy Events</a>
</li>

        
            
<li >
    <a href="../../Events/Publish-Subscribe/">Publish-Subscribe</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Rendering</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../Rendering/Progressive Enhancement/">Progressive Enhancement</a>
</li>

        
            
<li >
    <a href="../../Rendering/Server-Side Rendering/">Server-Side Rendering</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Security</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../Security/CSP/">CSP</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Templates</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../Templates/Overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../Templates/Elements/">Elements</a>
</li>

        
            
<li >
    <a href="../../Templates/Expressions/">Expressions</a>
</li>

        
            
<li >
    <a href="../../Templates/Keypaths/">Keypaths</a>
</li>

        
            
<li >
    <a href="../../Templates/Mustaches/">Mustaches</a>
</li>

        
            
<li >
    <a href="../../Templates/Parsing/">Parsing</a>
</li>

        
            
<li >
    <a href="../../Templates/Pre-Parsing/">Pre-Parsing</a>
</li>

        
            
<li >
    <a href="../../Templates/References/">References</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../Computed Properties/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../Magic Mode/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/ractivejs/ractive">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#indirect-dependencies">Indirect dependencies</a></li>
        
    
        <li class="first-level "><a href="#expressions-with-multiple-dependencies">Expressions with multiple dependencies</a></li>
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<p>Ractive maintains a <em>dependency graph</em> in order to do the minimum amount of work necessary to keep the DOM up-to-date.</p>
<p>If you inspect a Ractive instance in your console, you'll see a property called <code>_deps</code>. This is where all dependants are listed, indexed by their dependency.</p>
<p>There is also a concept of 'priority', which exists to save us some work. If, for example, a section needs to be removed (perhaps it's a conditional section, and the condition just went from truthy to falsy), there is no point in updating all its children, so we make sure that we teardown the section first. As part of that teardown process, the children - which all have lower priority - unregister themselves as dependants before they get a chance to update.</p>
<h1 id="indirect-dependencies">Indirect dependencies</h1>
<p>If you have a mustache which depends on <code>foo.bar</code>, and <code>foo</code> changes, it's quite possible that the mustache needs to re-render. We say that the mustache has an <em>indirect dependency</em> on <code>foo</code>, or that it has a <em>direct dependency on a downstream keypath</em> of <code>foo</code>.</p>
<p>This relationship is expressed through the <code>_depsMap</code> property of a Ractive instance - whenever <code>foo</code> changes, as well as dealing with direct <code>foo</code> dependants we check the map for those indirect dependants.</p>
<p>In the case of <a href="../../Templates/Expressions/">expressions</a> and <a href="../Observers/">observers</a>, we also need to consider dependants of <em>upstream keypaths</em>. For example, suppose we have a section based on a sorted array - if we modify one of the members of the array, we need to see if the sort order has changed or not as a result:</p>
<pre><code class="html">{{#( sort( list, 'name' ) )}}
  &lt;p&gt;{{name}}&lt;/p&gt;
{{/()}}
</code></pre>

<pre><code class="js">ractive = new Ractive({
  el: myContainer,
  template: myTemplate,
  data: {
    list: [{ name: 'Bob' }, { name: 'Charles' }, { name: 'Alice' }],
    sort: function ( list, property ) {
      return list.slice().sort( function ( a, b ) {
        return a[ property ] &lt; b[ property ] ? -1 : 1;
      });
    }
  }
});

// renders Alice, Bob, Charles

ractive.set( 'list[0].name', 'Zebediah' );

// updates to Alice, Charles, Zebediah
</code></pre>

<p>In the example, setting <code>list[0].name</code> causes dependants of <code>list</code> to be updated.</p>
<p>As well as <a href="../../Templates/Expressions/">expressions</a>, <a href="../Observers/">Observers</a> respond to both upstream and downstream changes.</p>
<h1 id="expressions-with-multiple-dependencies">Expressions with multiple dependencies</h1>
<p>The expression <code>{{ a + b }}</code> has two dependencies - <code>a</code> and <code>b</code> (or more accurately, whatever those <a href="../../Templates/References/">references</a> resolve to). The <code>_deps</code> graph actually includes objects representing those individual references, rather than the expression itself - the reference objects then notify the expression (if their value has changed) that it will need to re-evaluate itself.</p>
<p>Because the expression has multiple dependencies, it won't trigger an update straight away - it will wait until all the new data has come in first. So doing <code>ractive.set({ a: 1, b: 2 })</code> will only trigger one update, not two.</p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>© RactiveJS contributors<br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../../js/jquery-1.10.2.min.js"></script>
    <script src="../../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../../..';
    </script>
    <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
    <script src="../../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
